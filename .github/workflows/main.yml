on:
  push:
    branches:
      - main
       
jobs:
    deploy_job:
     runs-on: ubuntu-latest
     name: deploy
     steps:
       - name: Checkout
         uses: actions/checkout@v3

       - name: List files
         run: ls -R
         
       - name: Check network
         run: |
           ping -c 4 ${{ secrets.FTP_SERVER }}
           nc -zv ${{ secrets.FTP_SERVER }} ${{ secrets.FTP_PORT }}

       - name: Deploy file
         uses: wlixcc/SFTP-Deploy-Action@v1.2.4
         with:
            username: ${{ secrets.FTP_USERNAME }}
            password: ${{ secrets.FTP_PASSWORD }}
            server: ${{ secrets.FTP_SERVER }}
            port: ${{ secrets.FTP_PORT }}
            remote_path: /home/electgcs/public_html
            sftp_only: true 
            timeout: 200s
            verbose: true
